(this.webpackJsonpsocialapp=this.webpackJsonpsocialapp||[]).push([[0],{53:function(e,t,n){},54:function(e,t,n){},58:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(34),c=n.n(r),s=n(21),i=(n(53),n(8)),o=(n(54),n(11)),u=(n(58),n(59),function(e){return e.toolItems.items}),l=function(e){return e.toolItems.isLoading},j=function(e){return e.toolItems.initialStatus},d=function(e){return e.toolItems.authStatus},b=n(4),p="HIDE_MENU_STATUS",m={hideMenuStatus:!0},f=function(){return{type:p}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0,n=t.type;t.payload;switch(n){case p:return Object(b.a)(Object(b.a)({},e),{},{hideMenuStatus:!e.hideMenuStatus});default:return e}},h=n(7),x=n.n(h),v=n(14),g=n(39),y=n(20),w=(n(61),n(76),n(75),{initialFirebase:function(){var e=Object(v.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y.a.initializeApp({apiKey:"AIzaSyBO9vJ8DZwZ0aQpoIXdA2f7aBgKCBmdmMs",authDomain:"socialapp-df184.firebaseapp.com",databaseURL:"https://socialapp-df184-default-rtdb.firebaseio.com",projectId:"socialapp-df184",storageBucket:"socialapp-df184.appspot.com",messagingSenderId:"487276857539",appId:"1:487276857539:web:3c1f4bd901a4dbee35ba76"});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getItems:function(){var e=Object(v.a)(x.a.mark((function e(t){var n,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}return console.log("firebase call with category"),e.next=4,y.a.firestore().collection("items").where("category","==",t).get();case 4:return n=e.sent,e.abrupt("return",n.docs.map((function(e){return Object(b.a)(Object(b.a)({},e.data()),{},{id:e.id})})));case 8:return console.log("firebase call without category"),e.next=11,y.a.firestore().collection("items").get();case 11:return a=e.sent,e.abrupt("return",a.docs.map((function(e){return Object(b.a)(Object(b.a)({},e.data()),{},{id:e.id})})));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),addItem:function(){var e=Object(v.a)(x.a.mark((function e(t){var n,a,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.icon.name,e.next=3,y.a.storage().ref("icon/"+n);case 3:if(!(a=e.sent)){e.next=7;break}return e.next=7,a.put(t.icon);case 7:return e.next=9,a.getDownloadURL();case 9:if(e.t0=e.sent,e.t0){e.next=12;break}e.t0="";case 12:return r=e.t0,e.next=15,y.a.firestore().collection("items").add(Object(b.a)(Object(b.a)({},t),{},{icon:r,tags:t.tags.split(","),iconName:n||"",created:y.a.firestore.Timestamp.now().nanoseconds}));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),singOut:function(){y.a.auth().signOut()},singIn:function(){var e=Object(v.a)(x.a.mark((function e(t,n){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.auth().signInWithEmailAndPassword(t,n);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),isAuth:function(){var e=Object(v.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,e.next=3,y.a.auth().onAuthStateChanged((function(e){t=!!e}));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),removeItem:function(){var e=Object(v.a)(x.a.mark((function e(t,n){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.firestore().collection("items").doc(t).delete();case 2:return e.next=4,y.a.storage().ref("icon/"+n).delete().then((function(){return console.log("remove")})).catch((function(e){return console.log("error remove: ",e)}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}),S="LOADING_STATUS",N="SET_TOOL_ITEMS",_="INITIALIZE_STATE",I="SET_CATEGORY_LIST",T="SET_INITIAL_APP_STATUS",k="SET_CURRENT_CATEGORY",A="SET_AUTH_STATUS",C={items:[],isLoading:!1,category:[],initialStatus:!0,authStatus:!1,addNewCardStatus:!1},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case S:return Object(b.a)(Object(b.a)({},e),{},{isLoading:a});case N:case _:return Object(b.a)(Object(b.a)({},e),{},{items:Object(g.a)(a)});case I:return Object(b.a)(Object(b.a)({},e),{},{category:Object(g.a)(a)});case T:return Object(b.a)(Object(b.a)({},e),{},{initialStatus:a});case k:return e;case A:return Object(b.a)(Object(b.a)({},e),{},{authStatus:a});default:return e}},L=function(e){return{type:S,payload:e}},M=function(e){return{type:I,payload:e}},U=function(e){return{type:T,payload:e}},F=function(e){return{type:A,payload:e}},P=function(e){return function(){var t=Object(v.a)(x.a.mark((function t(n){var a;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(L(!0)),t.next=3,w.getItems(e);case 3:a=t.sent,n({type:N,payload:a}),n(L(!1));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},R=n(22),D=(n(64),n(65),n(2)),H=function(e){var t=e.children,n=e.active,a=void 0!==n&&n,r=e.closeModal;return Object(D.jsx)("div",{onClick:r,className:"modal ".concat(a&&"modal-active"),children:Object(D.jsx)("div",{onClick:function(e){return e.stopPropagation()},className:"modal__content",children:t})})},B=n(28),z=function(e){return e.menuReducer.hideMenuStatus},G=function(e){return e.toolItems.category},J=n(29),Z=function(e){var t=e.label,n=Object(J.a)(e,["label"]),a=Object(B.c)(n),r=Object(R.a)(a,2),c=r[0],s=r[1];return Object(D.jsxs)("div",{className:"form-input",children:[Object(D.jsx)("label",{htmlFor:n.name,children:t}),Object(D.jsx)("input",Object(b.a)(Object(b.a)({className:"text-input"},c),n)),s.touched&&s.error?Object(D.jsx)("div",{className:"error",children:s.error}):null]})},q=function(e){var t=e.label,n=Object(J.a)(e,["label"]),a=Object(B.c)(n),r=Object(R.a)(a,2),c=r[0],s=r[1];return Object(D.jsxs)("div",{className:"form-input",children:[Object(D.jsx)("label",{htmlFor:n.name,children:t}),Object(D.jsx)("textarea",Object(b.a)(Object(b.a)({className:"textarea-input"},c),n)),s.touched&&s.error?Object(D.jsx)("div",{className:"error",children:s.error}):null]})},K=function(e){var t=e.label,n=Object(J.a)(e,["label"]),a=Object(B.c)(n),r=Object(R.a)(a,2),c=r[0],s=r[1];return Object(D.jsxs)("div",{className:"form-select",children:[Object(D.jsx)("label",{htmlFor:n.name,children:t}),Object(D.jsx)("select",Object(b.a)(Object(b.a)({},c),n)),s.touched&&s.error?Object(D.jsx)("div",{className:"error",children:s.error}):null]})},V=function(e){var t=e.label,n=Object(J.a)(e,["label"]),a=Object(B.c)(n),r=Object(R.a)(a,2),c=(r[0],r[1]);return Object(D.jsxs)("div",{className:"form-file",children:[Object(D.jsx)("label",{htmlFor:n.name,children:t}),Object(D.jsx)("input",Object(b.a)({},n)),c.touched&&c.error?Object(D.jsx)("div",{className:"error",children:c.error}):null]})},Y=Object(o.b)((function(e){return{category:G(e)}}),{addNewCard:function(e,t){return function(){var n=Object(v.a)(x.a.mark((function n(a){return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w.addItem(e);case 2:return n.next=4,a(P());case 4:t(),console.log("add new card response: ");case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var t=e.addNewCard,n=e.category;console.log("new card form");var a={category:n[0],name:"",descr:"",icon:"",img:"",link:"",tags:""};return Object(D.jsx)(B.b,{initialValues:a,onSubmit:function(e,n){var a=n.setSubmitting,r=n.resetForm;t(e,(function(){r(),a(!1)}))},children:function(e){var t=e.setFieldValue,a=e.isSubmitting;return Object(D.jsxs)(B.a,{className:"card_form",children:[Object(D.jsx)(K,{name:"category",children:n.map((function(e){return Object(D.jsx)("option",{value:e,children:e},e)}))}),Object(D.jsx)(Z,{label:"Title:",name:"name",type:"text",placeholder:""}),Object(D.jsx)(q,{label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435:",name:"descr",type:"text",placeholder:""}),Object(D.jsx)(Z,{label:"\u0421\u0441\u044b\u043b\u043a\u0430:",name:"link",type:"text",placeholder:""}),Object(D.jsx)(Z,{label:"Tags (\u0447\u0435\u0440\u0435\u0437 \u0437\u0430\u043f\u044f\u0442\u0443\u044e):",name:"tags",type:"text",placeholder:""}),Object(D.jsxs)("div",{className:"card_form-row",children:[Object(D.jsx)(V,{label:"Add Logo",name:"icon",type:"file",onChange:function(e){t("icon",e.target.files[0])}}),Object(D.jsx)("button",{type:"submit",className:"new-card-btn",disabled:a,children:"Submit"})]})]})}})})),Q=function(){var e=Object(a.useState)(!1),t=Object(R.a)(e,2),n=t[0],r=t[1];return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("span",{onClick:function(){r(!n)},children:"New Card"},"new-card"),Object(D.jsx)(H,{active:n,closeModal:function(){r(!n)},children:Object(D.jsx)(Y,{})})]})},W={setHideMenuStatus:f,logOut:function(){return function(){var e=Object(v.a)(x.a.mark((function e(t){var n,a,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=w.singOut,a=w.isAuth,e.next=3,n();case 3:return e.next=5,a();case 5:r=e.sent,t(F(r));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},X=Object(o.b)((function(e){return{authStatus:d(e)}}),W)((function(e){var t=e.setHideMenuStatus,n=e.authStatus,a=e.logOut,r=[Object(D.jsx)(Q,{},"newCard"),Object(D.jsx)("span",{onClick:a,children:"Logout"},"logout")];return Object(D.jsxs)("div",{className:"header",children:[Object(D.jsx)("div",{className:"logo",children:Object(D.jsx)(s.b,{to:"/",children:Object(D.jsx)("h2",{children:"AllTools"})})}),Object(D.jsx)("nav",{children:Object(D.jsxs)("div",{className:"menu",children:[n&&r,Object(D.jsx)("span",{onClick:t,children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"})]})})]})})),$=n(26),ee=n.n($),te=(n(68),function(e){var t=e.id,n=e.icon,a=e.name,r=e.descr,c=(e.img,e.link),i=e.category,o=e.tags,u=e.authStatus,l=e.removeItem,j=e.iconName;return Object(D.jsxs)("div",{className:"tool-item",children:[u&&Object(D.jsx)("div",{className:"remove-btn",onClick:function(){return l(t,j)},children:"\u2718"}),Object(D.jsxs)("div",{className:"tool-item__wrap-top",children:[Object(D.jsx)("div",{className:"tool-item__category",children:Object(D.jsx)(s.b,{to:"/category/"+i,children:i})}),Object(D.jsxs)("div",{className:"tool-item__head",children:[Object(D.jsx)("div",{className:"tool-item__icon",children:Object(D.jsx)("img",{src:n,alt:"tool-icon"})}),Object(D.jsx)("div",{className:"tool-item__title",children:Object(D.jsx)("h2",{children:a})})]}),Object(D.jsx)("div",{className:"tool-item__descr",children:r}),Object(D.jsx)("div",{className:"tool-item__link",children:Object(D.jsxs)("a",{className:"tool-item__link-a",href:c,children:[c," >>"]})})]}),Object(D.jsx)("div",{className:"tool-item__tags",children:o.map((function(e){return Object(D.jsx)("span",{className:"tool-item__tags-item",children:e},t+e)}))})]})});te.propsTypes={tags:ee.a.array},te.defaultProps={tags:[]};var ne=te,ae=(n(69),function(e){var t=e.items,n=e.authStatus,a=e.removeItem,r=t.map((function(e){return Object(D.jsx)(ne,Object(b.a)(Object(b.a)({},e),{},{authStatus:n,removeItem:a}),e.id)}));return Object(D.jsx)("div",{className:"main-content",children:r})}),re=(n(70),function(){return Object(D.jsx)("div",{className:"loader",children:Object(D.jsx)("div",{className:"lds-dual-ring"})})}),ce={setToolItems:P,removeItem:function(e,t){return function(){var n=Object(v.a)(x.a.mark((function n(a){return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w.removeItem(e,t);case 2:return n.next=4,a(P());case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}},se=Object(o.b)((function(e){return{items:u(e),isLoading:l(e),authStatus:d(e)}}),ce)((function(e){var t=e.setToolItems,n=e.isLoading,r=Object(J.a)(e,["setToolItems","isLoading"]);return Object(a.useEffect)((function(){t(r.match.params.category)}),[r.match.params.category]),n?Object(D.jsx)(re,{}):Object(D.jsx)(ae,Object(b.a)({},r))})),ie=(n(71),Object(o.b)((function(e){return{hideMenuStatus:z(e),categoryList:G(e)}}),{setHideMenuStatus:f})((function(e){var t=e.setHideMenuStatus,n=e.hideMenuStatus,a=e.categoryList.map((function(e){return Object(D.jsxs)(s.b,{to:"/category/"+e,children:[" ",Object(D.jsx)("li",{children:e})," "]},e)}));return Object(D.jsx)("div",{onMouseLeave:t,className:n?"pop-up-menu__wrapp pop-up-menu--hidden":"pop-up-menu__wrapp",children:Object(D.jsx)("div",{className:"pop-up-menu",children:Object(D.jsxs)("ul",{className:"pop-up-menu__inner",children:[Object(D.jsxs)(s.b,{to:"/",children:[" ",Object(D.jsx)("li",{children:"\u0412\u0441\u0435"})," "]},"all"),a]})})})}))),oe=(n(72),Object(o.b)(null,{singIn:function(e,t){return function(){var n=Object(v.a)(x.a.mark((function n(a){var r;return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w.singIn(e,t);case 2:return n.next=4,w.isAuth();case 4:r=n.sent,a(F(r));case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var t=e.singIn,n=Object(a.useState)(""),r=Object(R.a)(n,2),c=r[0],s=r[1],i=Object(a.useState)(""),o=Object(R.a)(i,2),u=o[0],l=o[1];return Object(D.jsx)("div",{className:"login",children:Object(D.jsxs)("form",{className:"login_form",children:[Object(D.jsx)("input",{required:!0,onChange:function(e){s(e.target.value)},value:c,type:"text",name:"email",id:"login-email",placeholder:"email"}),Object(D.jsx)("input",{required:!0,onChange:function(e){l(e.target.value)},value:u,type:"text",name:"password",id:"login-password",placeholder:"password"}),Object(D.jsx)("button",{onClick:function(e){e.preventDefault(),c&&u&&t(c,u)},className:"login_btn",children:"\u0412\u043e\u0439\u0442\u0438"})]})})}))),ue=(n(73),Object(o.b)((function(e){return{authStatus:d(e)}}))((function(e){return e.authStatus?Object(D.jsx)(i.a,{to:"/"}):Object(D.jsx)(oe,{})}))),le=Object(o.b)((function(e){return{initialStatus:j(e)}}),{initializeState:function(){return function(){var e=Object(v.a)(x.a.mark((function e(t){var n,a,r,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(U(!0)),e.next=3,w.getItems();case 3:return n=e.sent,t({type:_,payload:n}),a=n.map((function(e){return e.category})),r=new Set(a),t(M(r)),e.next=10,w.isAuth();case 10:c=e.sent,t(F(c)),t(U(!1));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.initializeState,n=e.initialStatus;return Object(a.useEffect)((function(){t()}),[]),n?Object(D.jsx)(re,{}):(console.log("APP UPDATE"),Object(D.jsxs)("div",{className:"App",children:[Object(D.jsx)(X,{}),Object(D.jsx)(ie,{}),Object(D.jsxs)(i.d,{children:[Object(D.jsx)(i.b,{path:"/category/:category?",component:se}),Object(D.jsx)(i.b,{exact:!0,path:"/",component:se})]}),Object(D.jsx)(i.b,{exact:!0,path:"/admin",component:ue}),Object(D.jsx)(i.b,{exact:!0,path:"/new-card",component:Q})]}))})),je=n(31),de=n(48),be=Object(je.c)({toolItems:E,menuReducer:O}),pe=Object(je.d)(be,Object(je.a)(de.a));w.initialFirebase(),c.a.render(Object(D.jsx)(o.a,{store:pe,children:Object(D.jsx)(s.a,{children:Object(D.jsx)(le,{})})}),document.getElementById("root")),window.store=pe}},[[74,1,2]]]);
//# sourceMappingURL=main.cdd7a110.chunk.js.map